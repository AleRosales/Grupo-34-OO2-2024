<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <meta name="description" content="">
	    <meta name="author" content="">
	    <title>Stock - Grupo 34</title>
	    <!-- Favicon-->
	    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
	    <!-- Font Awesome icons (free version)-->
	    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
	    <!-- Google fonts-->
	    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
	    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
		<!-- Bootstrap core CSS -->
		<link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
		<link href="/css/modern-business.css" rel="stylesheet" />
		<link href="/css/styles.css" rel="stylesheet">

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	</head>
	<body id="page-top">
	
	<nav th:replace="fragments/general.html :: nav"></nav>
	
	<div class="container">
	    <div class="jumbotron">
	        <h1 class="display-5">Compras</h1>
	        <table class="table">
	            <thead>
	            <tr>
	                <th scope="col">ID</th>
	                <th scope="col">Fecha</th>
	                <th scope="col">Cliente</th>
	                <th scope="col">Producto</th>
	                <th scope="col">Precio unitario</th>
	                <th scope="col">Cantidad</th>
	                <th scope="col">Importe</th>
	                <th scope="col">Acciones</th>
	            </tr>
	            </thead>
	            <tbody>
	            <tr th:each="compra : ${compras}">
	                <td th:text="${compra.id}"></td>
	                <td th:text="${compra.fecha}"></td>
	                <td th:text="${compra.cliente}"></td>
	                <td th:text="${compra.producto.nombre}"></td>
	                <td th:text="${compra.producto.precio}"></td>
	                <td th:text="${compra.cantidad}"></td>
	                <td th:text="${compra.importe}"></td>
	                <td>
	                    <form th:action="@{/compras/{id}(id=${compra.id})}" method="get">
	                        <button type="submit" class="btn btn-primary"><i class="bi bi-pencil-square"></i></button>
	                    </form>
	                    <form th:action="@{/compras/eliminar/{id}(id=${compra.id})}" method="post" th:id="'delete-form-' + ${compra.id}" th:onsubmit="'return confirmDeletion(' + ${compra.id} + ');'">
	                        <button type="submit" class="btn btn-danger"><i class="bi bi-trash3-fill"></i></button>
	                    </form>
	                </td>
	            </tr>
	            </tbody>
	        </table>
	        <form th:action="@{/compras/nuevo}" method="get">
	            <button type="submit" class="btn btn-primary"><i class="bi bi-file-earmark-plus"></i> Nueva</button>
	        </form>
	    </div>
	</div>
	
	<!-- Bootstrap core JavaScript -->
	<script src="/vendor/jquery/jquery.min.js"></script>
	<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	
	<script>
	function confirmDeletion(id) {
	    return confirm('¿Está seguro de que desea eliminar la compra con ID ' + id + '?');
	}
	</script>
	
	</body>
</html>